<table class="table">
  <thead class="thead-dark">
    <% if @articles.length == 0 %>
    <tr>
      <td>no record found</td>
    </tr>
    <% else %>
       <tr>
           <th>Title</th>
           <th>Description</th>
           <th>Tag</th>
           <th></th>
           <th></th>
           <th></th>
           <th></th>
          </tr>
      <% @articles.each do |article| %>
        <% if article.status == 'accept'%>
          <tr>
            <td><%= article.title %></td>
            <td><%= article.description %></td>
            <td><%= article.category.name if article.category %></td>
            <td><%= link_to "show", article_path(article), class: "btn btn-primary  btn-sm"%></td>
            <% if  current_user && (current_user == article.user || current_user.role == "admin" ) %>
              <td><%= link_to "edit", edit_article_path(article), class: "btn btn-primary  btn-sm"  %></td>
              <td><%= link_to "delete", article_path(article), method: :delete, data: {confirm: "are you sure?"}, class: "btn btn-danger  btn-sm"  %></td>
            <% else %>
              <td></td>
              <td></td>
            <% end %>
             <% if current_user %>
                      <td>
                        <% if is_liked?(article).nil? %>
                          <%= link_to "like", likes_path(article_id: article.id, type: 'Article'),method: :post, class: "btn btn-primary  btn-sm" %>like count <%= article.likes.count %>
                        <% else%>
                          <%= link_to "dislike", like_path(article.likes.find_by(user: current_user), type: 'Article'),method: :delete, class: "btn btn-danger  btn-sm" %>like count <%= article.likes.count %>
                        <% end %>
                      </td>
                    <% end %>
          </tr>
        <% end %>
      <% end %>
    <% end %>
  </thead>  
</table>
